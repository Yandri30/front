{"ast":null,"code":"import { User } from '../../../models/User';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/user.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/services/script-upload.service\";\nimport * as i4 from \"@angular/forms\";\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(_userService, _router, _uploadScriptService) {\n      this._userService = _userService;\n      this._router = _router;\n      this._uploadScriptService = _uploadScriptService;\n      this.identity = this._userService.getIdentity();\n      this.user = new User('', '', '', '', '', '', '', '');\n\n      this._uploadScriptService.Upload(['validaciones']);\n    }\n\n    ngOnInit() {\n      //VALIDACION DE LOGIN\n      if (this.identity.role == 'ADMIN' || this.identity.role == 'VENDEDOR' || this.identity.role == 'TECNICO') {\n        this._router.navigate(['inicio']);\n      }\n    }\n\n    login(loginForm) {\n      //COMPROBAMOS EL FORMULARIO SEA VÁLIDO\n      if (loginForm.valid) {\n        this._userService.login(this.user).subscribe(response => {\n          //ALMACENAMOS EL TOKEN EN EL LOCAL STORAGE DEL NAVEGADOR\n          this.token = response.jwt;\n          localStorage.setItem('token', this.token);\n\n          this._userService.login(this.user, true).subscribe(response => {\n            const user = response.user;\n            localStorage.setItem('identity', JSON.stringify(response.user));\n            Swal.fire({\n              title: 'Éxito',\n              text: `Bienvenido, ${user.nombres}!`,\n              icon: 'success',\n              position: 'top-end',\n              toast: true,\n              showConfirmButton: false,\n              timer: 3000\n            }); //LO RETORNAMOS A UNA NUEVA VISTA\n\n            this._router.navigate(['inicio']);\n          }, error => {});\n        }, error => {\n          Swal.fire({\n            title: 'Error',\n            text: 'Tus credenciales son incorrectas',\n            icon: 'error',\n            position: 'top-end',\n            toast: true,\n            showConfirmButton: false,\n            timer: 3000\n          });\n        });\n      } else {\n        Swal.fire({\n          title: 'Error',\n          text: 'Ambos campos son obligatorios',\n          icon: 'error',\n          position: 'top-end',\n          toast: true,\n          showConfirmButton: false,\n          timer: 3000\n        });\n      }\n    }\n\n  }\n\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ScriptUploadService));\n  };\n\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 31,\n    vars: 2,\n    consts: [[1, \"body\"], [1, \"container\"], [\"type\", \"checkbox\", \"id\", \"flip\"], [1, \"cover\"], [1, \"front\"], [\"src\", \"../../../../assets/img/sebastian-pena-lambarri-YV593oyMKmo-unsplash.jpg\", \"alt\", \"\"], [1, \"text\"], [1, \"text-1\"], [1, \"text-2\"], [1, \"forms\"], [1, \"form-content\"], [1, \"login-form\"], [1, \"title\"], [3, \"ngSubmit\"], [\"loginForm\", \"ngForm\"], [1, \"input-boxes\"], [1, \"input-box\"], [1, \"fas\", \"fa-envelope\", \"ms-2\"], [\"type\", \"text\", \"id\", \"cedula\", \"name\", \"cedula\", \"placeholder\", \"Ingrese su C.I\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"cedula\", \"ngModel\"], [1, \"fas\", \"fa-lock\", \"ms-2\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"placeholder\", \"Ingrese su contrase\\u00F1a\", 3, \"ngModel\", \"ngModelChange\"], [\"password\", \"ngModel\"], [1, \"button\", \"input-box\"], [\"type\", \"submit\", \"value\", \"Ingresar\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r3 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵelement(2, \"input\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3)(4, \"div\", 4);\n        i0.ɵɵelement(5, \"img\", 5);\n        i0.ɵɵelementStart(6, \"div\", 6)(7, \"span\", 7);\n        i0.ɵɵtext(8, \"Bienvenido a nuestro sistema de \");\n        i0.ɵɵelement(9, \"br\");\n        i0.ɵɵtext(10, \" la empresa El Se\\u00F1uelo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"span\", 8);\n        i0.ɵɵtext(12, \"Inicia sesi\\u00F3n para comenzar\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(13, \"div\", 9)(14, \"div\", 10)(15, \"div\", 11)(16, \"div\", 12);\n        i0.ɵɵtext(17, \"Inicio de Sesion\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"form\", 13, 14);\n        i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_18_listener() {\n          i0.ɵɵrestoreView(_r3);\n\n          const _r0 = i0.ɵɵreference(19);\n\n          return ctx.login(_r0);\n        });\n        i0.ɵɵelementStart(20, \"div\", 15)(21, \"div\", 16);\n        i0.ɵɵelement(22, \"i\", 17);\n        i0.ɵɵelementStart(23, \"input\", 18, 19);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_23_listener($event) {\n          return ctx.user.cedula = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(25, \"div\", 16);\n        i0.ɵɵelement(26, \"i\", 20);\n        i0.ɵɵelementStart(27, \"input\", 21, 22);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_27_listener($event) {\n          return ctx.user.password = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(29, \"div\", 23);\n        i0.ɵɵelement(30, \"input\", 24);\n        i0.ɵɵelementEnd()()()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(23);\n        i0.ɵɵproperty(\"ngModel\", ctx.user.cedula);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.user.password);\n      }\n    },\n    directives: [i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm, i4.DefaultValueAccessor, i4.RequiredValidator, i4.NgControlStatus, i4.NgModel],\n    styles: [\".body[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background-image:url(jeremy-bishop-1braZySlEKA-unsplash.fb45ec65a51daf61.jpg);background-size:cover;padding:30px}.container[_ngcontent-%COMP%]{position:relative;max-width:850px;width:100%;background:#fff;padding:40px 30px;box-shadow:0 5px 10px #0003;perspective:2700px}.container[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;height:100%;width:50%;z-index:98;transition:all 1s ease;transform-origin:left;transform-style:preserve-3d}.container[_ngcontent-%COMP%]   #flip[_ngcontent-%COMP%]:checked ~ .cover[_ngcontent-%COMP%]{transform:rotateY(-180deg)}.container[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]   .front[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%}.cover[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{transform:rotateY(180deg);-webkit-backface-visibility:hidden;backface-visibility:hidden}.container[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]:before, .container[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]:after{content:\\\"\\\";position:absolute;height:100%;width:100%;background:#7d2ae8;opacity:.5;z-index:12}.container[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]:after{opacity:.3;transform:rotateY(180deg);-webkit-backface-visibility:hidden;backface-visibility:hidden}.container[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;object-fit:cover;z-index:10}.container[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{position:absolute;z-index:130;height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.cover[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .text-1[_ngcontent-%COMP%], .cover[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .text-2[_ngcontent-%COMP%]{font-size:26px;font-weight:600;color:#fff;text-align:center}.cover[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .text-2[_ngcontent-%COMP%]{font-size:15px;font-weight:500}.container[_ngcontent-%COMP%]   .forms[_ngcontent-%COMP%]{height:100%;width:100%;background:#fff}.container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.form-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%], .form-content[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]{width:calc(50% - 25px)}.forms[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:relative;font-size:24px;font-weight:500;color:#333}.forms[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;left:0;bottom:0;height:3px;width:25px;background:#7d2ae8}.forms[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]:before{width:20px}.forms[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .input-boxes[_ngcontent-%COMP%]{margin-top:30px}.forms[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]{display:flex;align-items:center;height:50px;width:100%;margin:10px 0;position:relative}.form-content[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:100%;width:100%;outline:none;border:none;padding:0 30px;font-size:16px;font-weight:500;border-bottom:2px solid rgba(0,0,0,.2);transition:all .3s ease}.form-content[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-content[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid{border-color:#7d2ae8}.form-content[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;color:#7d2ae8;font-size:17px}.forms[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333}.forms[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.forms[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.forms[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{color:#fff;margin-top:40px}.forms[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#fff;background:#7d2ae8;border-radius:6px;padding:0;cursor:pointer;transition:all .4s ease}.forms[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{background:#5b13b9}.forms[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#5b13b9;cursor:pointer}.forms[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{text-decoration:underline}.forms[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .login-text[_ngcontent-%COMP%], .forms[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .sign-up-text[_ngcontent-%COMP%]{text-align:center;margin-top:25px}.container[_ngcontent-%COMP%]   #flip[_ngcontent-%COMP%]{display:none}@media (max-width: 730px){.container[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]{display:none}.form-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%], .form-content[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]{width:100%}.form-content[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]   #flip[_ngcontent-%COMP%]:checked ~ .forms[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]{display:block}.container[_ngcontent-%COMP%]   #flip[_ngcontent-%COMP%]:checked ~ .forms[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{display:none}}\"]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}